# ARYV Production Environment - Secure Configuration
# DO NOT COMMIT THIS FILE TO GIT

NODE_ENV=production
PORT=3001

# Database Configuration (Railway will inject these automatically)
DATABASE_URL=${DATABASE_URL}
PGDATABASE=${PGDATABASE}
PGHOST=${PGHOST}
PGPASSWORD=${PGPASSWORD}
PGPORT=${PGPORT}
PGUSER=${PGUSER}
# Enable SSL for database connections
PGSSLMODE=require
PGSSLROOTCERT=server-ca.pem

# JWT Configuration - Production Secrets
JWT_SECRET=${JWT_SECRET:-aryv_jwt_prod_$(date +%s)_secure_key_$(openssl rand -hex 16)}
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d
JWT_ISSUER=aryv-app.com
JWT_AUDIENCE=aryv-users

# CORS Configuration - Production Domains Only
CORS_ORIGINS=https://aryv-app.com,https://api.aryv-app.com,https://admin.aryv-app.com,https://aryv-admin-professional.majokoobo.workers.dev

# Rate Limiting - Production Values
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
RATE_LIMIT_SKIP_SUCCESS=true
RATE_LIMIT_SKIP_FAILED=false

# Security Headers
HELMET_ENABLED=true
HELMET_CSP_ENABLED=true
HELMET_HSTS_MAX_AGE=31536000
HELMET_REFERRER_POLICY=strict-origin-when-cross-origin

# Input Validation
VALIDATION_ENABLED=true
SANITIZATION_ENABLED=true
XSS_PROTECTION=true
SQL_INJECTION_PROTECTION=true

# Session Security
SESSION_SECRET=${SESSION_SECRET:-aryv_session_prod_$(openssl rand -base64 32)}
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict
SESSION_MAX_AGE=86400000

# API Security
API_KEY_REQUIRED=true
API_VERSION=v1
MAX_REQUEST_SIZE=10mb
BODY_PARSER_LIMIT=10mb

# Monitoring and Logging
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_REQUESTS=true
LOG_ERRORS=true
AUDIT_LOG_ENABLED=true

# Production Features
FEATURE_AI_MATCHING=true
FEATURE_REAL_TIME_CHAT=true
FEATURE_PUSH_NOTIFICATIONS=true
FEATURE_ANALYTICS=true
FEATURE_DEBUG_MODE=false

# External Services (Set these with your actual keys)
# STRIPE INTEGRATION - OPTIONAL FOR MVP (Escrow + Cash payments only)
# Uncomment when adding card payment support in future:
# STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
# STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
GOOGLE_MAPS_API_KEY=${GOOGLE_MAPS_API_KEY}
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}

# Cloudflare R2 Storage (recommended over AWS S3)
CLOUDFLARE_R2_ACCESS_KEY=${CLOUDFLARE_R2_ACCESS_KEY}
CLOUDFLARE_R2_SECRET_KEY=${CLOUDFLARE_R2_SECRET_KEY}
CLOUDFLARE_R2_BUCKET=aryv-uploads
CLOUDFLARE_R2_ENDPOINT=https://${CLOUDFLARE_ACCOUNT_ID}.r2.cloudflarestorage.com
CLOUDFLARE_R2_PUBLIC_URL=https://uploads.aryv-app.com

# AWS S3 (alternative - use if you prefer AWS)
# AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
# AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
# AWS_S3_BUCKET=aryv-uploads
# AWS_REGION=us-east-1

# Email Configuration
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
SMTP_SECURE=true

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DB=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_EXTERNAL_APIS=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_ENCRYPTION=true
BACKUP_RETENTION_DAYS=30

# Performance
CONNECTION_POOL_MAX=25
CONNECTION_POOL_MIN=2
QUERY_TIMEOUT=30000
CONNECTION_TIMEOUT=10000

# Redis Configuration (if using Redis)
REDIS_URL=${REDIS_URL}
REDIS_SSL=true
REDIS_PASSWORD=${REDIS_PASSWORD}