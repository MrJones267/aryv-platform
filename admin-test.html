<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARYV Admin Panel - Test</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; background: #f8f9fa; }
        .app { min-height: 100vh; display: flex; }
        .sidebar { width: 280px; background: linear-gradient(135deg, #1976d2, #1565c0); color: white; box-shadow: 2px 0 10px rgba(0,0,0,0.1); }
        .main { flex: 1; display: flex; flex-direction: column; }
        .header { background: white; padding: 1rem 2rem; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .content { flex: 1; padding: 2rem; overflow: auto; }
        .card { background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; margin-bottom: 2rem; padding: 2rem; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
        .stat-card { background: white; padding: 1.5rem; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .btn { background: #1976d2; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-weight: 500; }
        .btn:hover { background: #1565c0; }
        .btn.danger { background: #dc3545; }
        .btn.danger:hover { background: #c82333; }
        .nav-item { display: flex; align-items: center; gap: 1rem; padding: 1rem 1.5rem; color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.2s; }
        .nav-item.active { color: white; background: rgba(255,255,255,0.15); border-right: 3px solid white; }
        .nav-item:hover { background: rgba(255,255,255,0.1); }
        .loading { display: flex; justify-content: center; align-items: center; padding: 2rem; color: #6c757d; }
        .error { color: #dc3545; padding: 1rem; text-align: center; }
        .success { color: #28a745; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
        const { useState, useEffect } = React;

        // API Configuration
        const API_BASE = 'http://localhost:3001';

        // Dashboard Component
        const Dashboard = () => {
            const [stats, setStats] = useState({
                users: 0,
                rides: 0,
                packages: 0,
                revenue: 0
            });
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState('');

            useEffect(() => {
                fetchStats();
            }, []);

            const fetchStats = async () => {
                try {
                    console.log('Fetching stats from:', API_BASE);
                    
                    const [usersRes, ridesRes, packagesRes] = await Promise.all([
                        fetch(`${API_BASE}/api/users`).then(r => r.json()),
                        fetch(`${API_BASE}/api/rides`).then(r => r.json()),
                        fetch(`${API_BASE}/api/packages`).then(r => r.json())
                    ]);

                    console.log('Responses:', { usersRes, ridesRes, packagesRes });

                    setStats({
                        users: usersRes.data?.length || 0,
                        rides: ridesRes.data?.length || 0,
                        packages: packagesRes.data?.length || 0,
                        revenue: packagesRes.data?.reduce((sum, pkg) => sum + parseFloat(pkg.price || 0), 0) || 0
                    });
                } catch (err) {
                    console.error('Failed to fetch stats:', err);
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            if (loading) {
                return React.createElement('div', { className: 'loading' }, 'ðŸ”„ Loading dashboard data...');
            }

            if (error) {
                return React.createElement('div', { className: 'error' }, 
                    `âŒ Connection Error: ${error}`,
                    React.createElement('br'),
                    React.createElement('button', { 
                        className: 'btn', 
                        onClick: () => window.location.reload(),
                        style: { marginTop: '1rem' }
                    }, 'ðŸ”„ Retry')
                );
            }

            return React.createElement('div', null,
                React.createElement('h2', { style: { color: '#1976d2', marginBottom: '1rem' } }, 
                    'ðŸ“Š ARYV Professional Dashboard'),

                React.createElement('div', { className: 'stats' },
                    React.createElement('div', { className: 'stat-card' },
                        React.createElement('div', { style: { fontSize: '2rem', fontWeight: 'bold', color: '#1976d2' } }, stats.users),
                        React.createElement('div', { style: { color: '#666' } }, 'Total Users')
                    ),
                    React.createElement('div', { className: 'stat-card' },
                        React.createElement('div', { style: { fontSize: '2rem', fontWeight: 'bold', color: '#28a745' } }, stats.rides),
                        React.createElement('div', { style: { color: '#666' } }, 'Total Rides')
                    ),
                    React.createElement('div', { className: 'stat-card' },
                        React.createElement('div', { style: { fontSize: '2rem', fontWeight: 'bold', color: '#17a2b8' } }, stats.packages),
                        React.createElement('div', { style: { color: '#666' } }, 'Packages')
                    ),
                    React.createElement('div', { className: 'stat-card' },
                        React.createElement('div', { style: { fontSize: '2rem', fontWeight: 'bold', color: '#ffc107' } }, `$${stats.revenue.toFixed(2)}`),
                        React.createElement('div', { style: { color: '#666' } }, 'Revenue')
                    )
                ),

                React.createElement('div', { className: 'card' },
                    React.createElement('h3', { style: { color: '#1976d2', marginBottom: '1rem' } }, 
                        'ðŸŽ¯ System Status'),
                    React.createElement('div', { style: { lineHeight: '1.8', fontSize: '1.1rem' } },
                        'âœ… Backend API: Connected and operational',
                        React.createElement('br'),
                        'ðŸ—„ï¸ Database: PostgreSQL with real-time data',
                        React.createElement('br'),
                        'ðŸ“¡ WebSocket: Real-time features enabled',
                        React.createElement('br'),
                        'ðŸ’¼ Admin Panel: Professional React interface',
                        React.createElement('br'),
                        `ðŸš€ Last Updated: ${new Date().toLocaleString()}`
                    )
                ),

                React.createElement('div', { className: 'card' },
                    React.createElement('h3', { style: { color: '#1976d2', marginBottom: '1rem' } }, 
                        'ðŸ”§ Quick Actions'),
                    React.createElement('div', { style: { display: 'flex', gap: '1rem', flexWrap: 'wrap' } },
                        React.createElement('button', { 
                            className: 'btn',
                            onClick: fetchStats
                        }, 'ðŸ”„ Refresh Data'),
                        React.createElement('button', { 
                            className: 'btn',
                            onClick: () => window.open(`${API_BASE}/health`, '_blank')
                        }, 'ðŸ¥ Health Check'),
                        React.createElement('button', { 
                            className: 'btn',
                            onClick: () => window.open(`${API_BASE}/api/websocket/status`, '_blank')
                        }, 'ðŸ“¡ WebSocket Status')
                    )
                )
            );
        };

        // Main App
        const App = () => {
            const [activeSection, setActiveSection] = useState('dashboard');

            const menuItems = [
                { id: 'dashboard', icon: 'ðŸ“Š', label: 'Dashboard' },
                { id: 'users', icon: 'ðŸ‘¥', label: 'Users' },
                { id: 'rides', icon: 'ðŸš—', label: 'Rides' },
                { id: 'packages', icon: 'ðŸ“¦', label: 'Packages' },
                { id: 'analytics', icon: 'ðŸ“ˆ', label: 'Analytics' }
            ];

            return React.createElement('div', { className: 'app' },
                React.createElement('div', { className: 'sidebar' },
                    React.createElement('div', { 
                        style: { padding: '2rem 1.5rem', textAlign: 'center', borderBottom: '1px solid rgba(255,255,255,0.2)' } 
                    },
                        React.createElement('h2', { style: { margin: 0, fontSize: '1.4rem' } }, 'ðŸ¢ ARYV Professional'),
                        React.createElement('p', { style: { margin: '0.5rem 0 0 0', fontSize: '0.85rem', opacity: 0.9 } }, 
                            'Database Connected Admin')
                    ),
                    React.createElement('nav', null,
                        menuItems.map(item =>
                            React.createElement('a', {
                                key: item.id,
                                href: '#',
                                className: `nav-item ${activeSection === item.id ? 'active' : ''}`,
                                onClick: (e) => { e.preventDefault(); setActiveSection(item.id); }
                            },
                                React.createElement('span', { style: { fontSize: '1.2rem' } }, item.icon),
                                item.label
                            )
                        )
                    )
                ),
                
                React.createElement('div', { className: 'main' },
                    React.createElement('div', { className: 'header' },
                        React.createElement('h1', { style: { color: '#1976d2', fontSize: '1.5rem' } }, 
                            activeSection.charAt(0).toUpperCase() + activeSection.slice(1)),
                        React.createElement('div', { style: { fontSize: '0.9rem', color: '#6c757d' } }, 
                            `Connected to: ${API_BASE}`)
                    ),
                    
                    React.createElement('div', { className: 'content' },
                        activeSection === 'dashboard' && React.createElement(Dashboard),
                        activeSection !== 'dashboard' && React.createElement('div', { className: 'card' },
                            React.createElement('h3', { style: { color: '#1976d2', marginBottom: '1rem' } }, 
                                `${menuItems.find(m => m.id === activeSection)?.icon} ${activeSection.charAt(0).toUpperCase() + activeSection.slice(1)} Management`),
                            React.createElement('p', { style: { fontSize: '1.1rem', color: '#6c757d' } }, 
                                `Professional ${activeSection} management interface with real-time data.`),
                            React.createElement('div', { style: { marginTop: '2rem', padding: '1rem', background: '#e8f5e8', borderRadius: '8px', border: '1px solid #c3e6cb' } },
                                'âœ… Database integration complete - feature implementation ready')
                        )
                    )
                )
            );
        };

        // Render the app
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>